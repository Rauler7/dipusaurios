$(function(){
	$.getJSON('data/dipusaurios.json', function (data) {
		var getTemplate = $("#person-template").html(),
			template    = Handlebars.compile(getTemplate);

		var container = $('.content__people').html(template(data)).isotope({
			itemSelector: '.person',
			layoutMode: 'fitRows'
		});

		$('#filters').on('change', function() {
			var filterValue = this.value + ($('#partys button.active').length ? $('#partys button.active').attr('data-filter') : '');
		    filterValue = filterValue.replace(/[*]+/, '*');

			container.isotope({
				filter: filterValue
			});
		});
		$('#partys').on('click', 'button', function() {
		    var filterValue = $(this).attr('data-filter') + $('#filters').val();
		    filterValue = filterValue.replace(/[*]+/, '*');

			$(this).siblings('button').removeClass('active');
			$(this).addClass('active');

			container.isotope({
				filter: filterValue
			});
		});
	});
});